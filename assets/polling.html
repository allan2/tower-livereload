<script type="module">
  const retry = (it) =>
    fetch(it)
      .then(() => console.log("[tower-livereload] reload..."))
      .then(() => window.location.reload())
      .catch(() => setTimeout(() => retry(it), 1000));
  console.log("[tower-livereload] connected...");
  fetch("{long_poll}")
    .finally(() => console.log("[tower-livereload] disconnected..."))
    .finally(() => retry("{back_up}"))
    .catch(() => null);
</script>
